<!DOCTYPE html>  
<html>  
  
    <head>  
        <meta charset="UTF-8">  
        <title>capture screen</title>  
    </head>  
  
    <body>  
        <video id="video" controls="controls" crossorigin="anonymous">  
            <source src="http://apptest.mhc.mobile.taikang.com/publish/storage/fileGet?fileId=ff808181631f84470163200737bd001b">  
        </video>  
        <div id="output"></div>  
        <button onclick="jietu()">截图</button>  
        <script type="text/javascript">  
            (function() {  
                var video, output;  
                var scale = 0.8;  
                var initialize = function() {  
                    output = document.getElementById("output");  
                    video = document.getElementById("video");  
//                  video.addEventListener('loadeddata', captureImage);  
                };  
  
//              var captureImage = function() {  
//                  var canvas = document.createElement("canvas");  
//                  canvas.width = video.videoWidth * scale;  
//                  canvas.height = video.videoHeight * scale;  
//                  canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);  
//
//                  var img = document.createElement("img");  
//                  img.src = canvas.toDataURL("image/png");  
////                  output.appendChild(img);  
//              };  
  
                initialize();  
            })();  
            function jietu(){  
                var scale = 0.4;  
                var canvas = document.createElement("canvas");  
                    canvas.width = video.videoWidth * scale;  
                    canvas.height = video.videoHeight * scale;  
                    canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);  
  
                    var img = document.createElement("img");  
                    img.src = canvas.toDataURL("image/png");  
                    console.log(img.src)
                    output.appendChild(img);  
            }  
        </script>  
    </body>  
  
</html> 